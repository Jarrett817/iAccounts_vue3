var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,l)=>{for(var s in l||(l={}))t.call(l,s)&&o(e,s,l[s]);if(a)for(var s of a(l))n.call(l,s)&&o(e,s,l[s]);return e};import{d as s,y as i,f as r,z as c,A as u,B as d,C as m,D as p,E as f,j as g,G as h,H as v,I as b,U as y,r as w,J as C,K as k,L as B,P as S,M as O,N as T,O as x,Q as M,R as L,S as P,T as _,V as I,p as A,b as j,c as H,o as N,e as V,F as D,n as U,h as F,l as Y,a as z,W as E,s as R,k as q,X as G,Y as J,t as K,g as Q,q as W}from"./index.3cf4fa6d.js";import"./vendor.1da3d560.js";var X,[$,Z]=c("action-bar"),ee=Symbol($),te=s({name:$,props:{safeAreaInsetBottom:{type:Boolean,default:!0}},setup(e,{slots:t}){var{linkChildren:a}=i(ee);return a(),()=>r("div",{class:Z({unfit:!e.safeAreaInsetBottom})},[null==t.default?void 0:t.default()])}}),ae=u(te),[ne,oe]=c("action-bar-button"),le=s({name:ne,props:d({},m,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),setup(e,{slots:t}){var a=p(),{parent:n,index:o}=f(ee),l=g((()=>{if(n){var e=n.children[o.value-1];return!(e&&"isButton"in e)}})),s=g((()=>{if(n){var e=n.children[o.value+1];return!(e&&"isButton"in e)}}));return h({isButton:!0}),()=>{var{type:n,icon:o,text:i,color:c,loading:u,disabled:d}=e;return r(v,{class:oe([n,{last:s.value,first:l.value}]),size:"large",type:n,icon:o,color:c,loading:u,disabled:d,onClick:a},{default:()=>[t.default?t.default():i]})}}}),se=u(le),[ie,re,ce]=c("dialog"),ue=[...O,"transition","closeOnPopstate"],de=s({name:ie,props:d({},b,{title:String,theme:String,width:[Number,String],message:[String,Function],callback:Function,allowHtml:Boolean,className:y,beforeClose:Function,messageAlign:String,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,closeOnClickOverlay:Boolean,transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0}}),emits:["confirm","cancel","update:show"],setup(e,{emit:t,slots:a}){var n=w({confirm:!1,cancel:!1}),o=e=>t("update:show",e),l=t=>{o(!1),e.callback&&e.callback(t)},s=a=>()=>{e.show&&(t(a),e.beforeClose?(n[a]=!0,M({interceptor:e.beforeClose,args:[a],done(){l(a),n[a]=!1},canceled(){n[a]=!1}})):l(a))},i=s("cancel"),c=s("confirm"),u=()=>{var t=a.title?a.title():e.title;if(t)return r("div",{class:re("header",{isolated:!e.message&&!a.default})},{default:()=>[t]})},m=t=>{var{message:a,allowHtml:n,messageAlign:o}=e,l=re("message",{"has-title":t,[o]:o});return n&&"string"==typeof a?r("div",{class:l,innerHTML:a},null):r("div",{class:l},[L(a)?a():a])},p=()=>{if(a.default)return r("div",{class:re("content")},[a.default()]);var{title:t,message:n,allowHtml:o}=e;if(n){var l=!(!t&&!a.title);return r("div",{key:o?1:0,class:re("content",{isolated:!l})},[m(l)])}},f=()=>a.footer?a.footer():"round-button"===e.theme?r(ae,{class:re("footer")},{default:()=>[e.showCancelButton&&r(se,{type:"warning",text:e.cancelButtonText||ce("cancel"),class:re("cancel"),color:e.cancelButtonColor,loading:n.cancel,onClick:i},null),e.showConfirmButton&&r(se,{type:"danger",text:e.confirmButtonText||ce("confirm"),class:re("confirm"),color:e.confirmButtonColor,loading:n.confirm,onClick:c},null)]}):r("div",{class:[x,re("footer")]},[e.showCancelButton&&r(v,{size:"large",text:e.cancelButtonText||ce("cancel"),class:re("cancel"),style:{color:e.cancelButtonColor},loading:n.cancel,onClick:i},null),e.showConfirmButton&&r(v,{size:"large",text:e.confirmButtonText||ce("confirm"),class:[re("confirm"),{[T]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:n.confirm,onClick:c},null)]);return()=>{var{width:t,title:a,theme:n,message:l,className:s}=e;return r(S,C({role:"dialog",class:[re([n]),s],style:{width:B(t)},"aria-labelledby":a||l},d({},k(e,ue),{"onUpdate:show":o})),{default:()=>[u(),p(),f()]})}}});function me(e){return P?new Promise(((t,a)=>{var n;X||(n={setup(){var{state:e,toggle:t}=I();return()=>r(de,d({},e,{"onUpdate:show":t}),null)}},({instance:X}=_(n))),X.open(d({},me.currentOptions,e,{callback:e=>{("confirm"===e?t:a)(e)}}))})):Promise.resolve()}me.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},me.currentOptions=d({},me.defaultOptions),me.alert=me,me.confirm=e=>me(d({showCancelButton:!0},e)),me.close=()=>{X&&X.toggle(!1)},me.setDefaultOptions=e=>{Object.assign(me.currentOptions,e)},me.resetDefaultOptions=()=>{me.currentOptions=d({},me.defaultOptions)},me.install=e=>{e.use(u(de)),e.config.globalProperties.$dialog=me},me.Component=u(de);var pe=s({components:{},props:{show:{type:Boolean,default:!1}},emits:["update:show","selected"],setup:(e,t)=>({listShow:g({get:()=>e.show,set(e){t.emit("update:show",e)}}),iconList:["business","bonus","clothes","daily","food","donate","houserent","intrest","fuel","entertainment","medicine","salary","makeup","shopping","study","phone","tour","smoke_wine","traffic","winning","investment","other"],onClick:e=>{let a=e.currentTarget.children[0].attributes[0].value.split("-")[1];t.emit("selected",a)}})});const fe=F("data-v-2e96a338");A("data-v-2e96a338");const ge={class:"icon-list-wrap"};j();const he=fe(((e,t,a,n,o,l)=>{const s=H("svg-icon"),i=H("van-action-sheet");return N(),V(i,{title:"选择标签",show:e.listShow,"onUpdate:show":t[1]||(t[1]=t=>e.listShow=t),closeable:"",position:"bottom",style:{height:"100vh"}},{default:fe((()=>[r("div",ge,[(N(!0),V(D,null,U(e.iconList,(t=>(N(),V(s,{key:t,name:t,onClick:e.onClick},null,8,["name","onClick"])))),128))])])),_:1},8,["show"])}));pe.render=he,pe.__scopeId="data-v-2e96a338";const ve=s({components:{IconList:pe},props:{from:{type:String,default:"/"},id:{type:String,default:""},type:{type:String,default:""},mode:{type:String,default:""}},setup(e){const t=w({id:null,name:"",icon:""}),a=w({id:null,type:"",value:0,desc:"",tag:{name:"",icon:""},createdAt:void 0}),n=Y(!1),o=Y(!1),l=z(),s=async n=>{if("tags"===e.from){if("add"!==e.mode){const e=await E.getTargetDetail({id:Number(n)}).then((e=>e));Object.assign(t,e)}}else{const e=await R.getTargetDetail({id:Number(n)}).then((e=>e));Object.assign(a,e)}};s(e.id);return{navbarTitleHeight:"tags"===e.from?"auto":"76px",onSelected:e=>{t.icon=e,o.value=!1},showIconList:o,fieldValueFormatter:(e,t)=>"type"===e?"expend"===t?"支出":"收入":"createdAt"===e?q(t).format("YYYY-MM-DD HH:mm:ss"):t,moneyPannelVisible:n,editClick:()=>{"tags"===e.from?"add"===e.mode?E.addTag({name:t.name,icon:t.icon,type:e.type}).then((()=>{l.push({name:e.from})})):E.updateTargetTag({id:Number(e.id),name:t.name,icon:t.icon}).then((()=>{l.push({name:e.from})})):n.value=!0},deleteClick:()=>{me.confirm({message:"确认删除？"}).then((()=>{"tags"===e.from?E.deleteTargetTag({id:Number(e.id)}).then((t=>{l.push({name:e.from})})):R.deleteTargetBill({id:Number(e.id)}).then((t=>{l.push({name:e.from})}))})).catch((()=>{}))},onClickLeft:()=>{l.push({name:e.from})},getTargetDetail:s,keyMap:{value:"金额",type:"类型",desc:"备注",createdAt:"日期"},tagMap:t,billsMap:a}}}),be=()=>{G((e=>({"59fb866e":e.navbarTitleHeight})))},ye=ve.setup;ve.setup=ye?(e,t)=>(be(),ye(e,t)):be;const we=F("data-v-22dee202");A("data-v-22dee202");const Ce={class:"button-wrap"},ke=Q("删除");j();const Be=we(((e,t,a,n,o,s)=>{const i=H("svg-icon"),c=H("van-nav-bar"),u=H("van-field"),d=H("van-icon"),m=H("van-cell-group"),p=H("icon-list"),f=H("van-button"),g=H("money-pannel"),h=H("i-layout");return N(),V(h,null,{header:we((()=>[r(c,{"left-text":"返回","left-arrow":"",title:"tags"===e.from?"add"===e.mode?"新建标签":"编辑标签":"",onClickLeft:e.onClickLeft},J({_:2},["tags"!==e.from?{name:"title",fn:we((()=>[r(i,{name:e.tagMap.icon||e.billsMap.tag.icon},null,8,["name"]),r("span",null,K(e.tagMap.name||e.billsMap.tag.name),1)]))}:void 0]),1032,["title","onClickLeft"])])),main:we((()=>["tags"===e.from?(N(),V(D,{key:0},[r(m,null,{default:we((()=>[r(u,{label:"名称",maxlength:"4",modelValue:e.tagMap.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tagMap.name=t)},null,8,["modelValue"]),r(u,{label:"图标",onClickRightIcon:t[2]||(t[2]=t=>e.showIconList=!0),readonly:""},{"right-icon":we((()=>[r(i,{name:e.tagMap.icon},null,8,["name"]),r(d,{name:"arrow"})])),_:1})])),_:1}),r(p,{show:e.showIconList,"onUpdate:show":t[3]||(t[3]=t=>e.showIconList=t),onSelected:e.onSelected},null,8,["show","onSelected"])],64)):(N(),V(m,{key:1},{default:we((()=>[(N(!0),V(D,null,U({type:e.billsMap.type,value:e.billsMap.value,createdAt:e.billsMap.createdAt,desc:e.billsMap.desc},((t,a)=>(N(),V(u,{key:a,label:e.keyMap[a],"model-value":e.fieldValueFormatter(a,t),readonly:""},null,8,["label","model-value"])))),128))])),_:1}))])),footer:we((()=>[r("div",Ce,[r(f,{type:"default",onClick:e.editClick},{default:we((()=>[Q(K("tags"===e.from?"保存":"编辑"),1)])),_:1},8,["onClick"]),"add"!==e.mode?(N(),V(f,{key:0,type:"default",onClick:e.deleteClick},{default:we((()=>[ke])),_:1},8,["onClick"])):W("",!0)]),r(g,{show:e.moneyPannelVisible,"onUpdate:show":t[4]||(t[4]=t=>e.moneyPannelVisible=t),params:l({},e.billsMap)},null,8,["show","params"])])),_:1})}));ve.render=Be,ve.__scopeId="data-v-22dee202";export default ve;
